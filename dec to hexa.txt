%{
#include <stdio.h>
#include <stdlib.h>

void decToHex(int n) {
    char hex[20];
    int i = 0;

    // manual conversion using remainder and division
    while(n != 0) {
        int temp = n % 16;
        if (temp < 10)
            hex[i] = temp + '0';
        else
            hex[i] = temp - 10 + 'A';
        i++;
        n /= 16;
    }

    if (i == 0) {   // in case input is 0
        printf("0");
        return;
    }

    // print in reverse order
    printf("0x");
    for (int j = i - 1; j >= 0; j--)
        printf("%c", hex[j]);
    printf(" ");
}
%}

%%
[0-9]+    {
              int num = atoi(yytext);
              decToHex(num);         // call manual conversion function
           }
[ \t\n]+  { ECHO; }                 // preserve spaces/newlines
.         { ECHO; }
%%

int yywrap() { return 1; }

int main() {
    printf("Enter decimal numbers (Ctrl+D to end):\n");
    yylex();
    return 0;
}



lex decimal_to_hex_manual.l
gcc lex.yy.c -o decimal_to_hex_manual
./decimal_to_hex_manual