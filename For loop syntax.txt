Lex File — forloop.l


%{
#include "y.tab.h"
%}

%%
"for"           { return FOR; }
"("             { return LPAREN; }
")"             { return RPAREN; }
";"             { return SEMI; }
"<"             { return LT; }
">"             { return GT; }
"=="            { return EQ; }
"="             { return ASSIGN; }
[a-zA-Z_][a-zA-Z0-9_]*   { return ID; }
[0-9]+          { return NUM; }
[+\-*/]         { return OP; }
[ \t\n]         ;  // ignore whitespace
.               ;
%%

int yywrap() { return 1; }


Yacc File — forloop.y

%{
#include <stdio.h>
#include <stdlib.h>
%}

%token FOR ID NUM ASSIGN LT GT EQ OP LPAREN RPAREN SEMI

%%
start:
    FOR LPAREN expr SEMI condition SEMI expr RPAREN
        { printf("Valid for loop syntax.\n"); }
    ;

expr:
      ID ASSIGN NUM
    | ID ASSIGN ID
    | ID OP OP     // e.g., i++, j--
    | /* empty */
    ;

condition:
      ID LT NUM
    | ID GT NUM
    | ID EQ NUM
    | /* empty */
    ;
%%

int main() {
    printf("Enter a for loop: ");
    yyparse();
    return 0;
}

void yyerror(const char *s) {
    fprintf(stderr, "Invalid syntax: %s\n", s);
}


lex forloop.l
yacc -d forloop.y
gcc lex.yy.c y.tab.c -o forloop
./forloop