%{
#include <stdio.h>
#include <string.h>

int keywords = 0, identifiers = 0, comments = 0;
int words = 0, spaces = 0, lines = 0;

// List of C keywords
char *kw[] = {
    "auto","break","case","char","const","continue","default","do","double",
    "else","enum","extern","float","for","goto","if","int","long",
    "register","return","short","signed","sizeof","static","struct",
    "switch","typedef","union","unsigned","void","volatile","while"
};
int isKeyword(char *str) {
    for(int i=0; i<32; i++) {
        if(strcmp(str, kw[i]) == 0)
            return 1;
    }
    return 0;
}
%}

%%
// ---------- PATTERNS ----------
"//".*                  { comments++; }                // Single-line comment
"/*"([^*]|\*+[^*/])*"*"+"/"   { comments++; }          // Multi-line comment
[a-zA-Z_][a-zA-Z0-9_]*        {
                                words++;
                                if(isKeyword(yytext))
                                    keywords++;
                                else
                                    identifiers++;
                              }
[ \t]+                  { spaces++; }                  // Count spaces
\n                      { lines++; }                   // Count lines
.                       ;                              // Ignore others
%%

int yywrap() { return 1; }

int main() {
    printf("Enter your code (press Ctrl+D to end):\n");
    yylex();

    printf("\n--- TOKEN COUNTS ---\n");
    printf("Keywords: %d\n", keywords);
    printf("Identifiers: %d\n", identifiers);
    printf("Comments: %d\n", comments);
    printf("Words: %d\n", words);
    printf("Spaces: %d\n", spaces);
    printf("Lines: %d\n", lines);

    return 0;
}




lex count_tokens.l
gcc lex.yy.c -o count_tokens
./count_tokens




int main() {
   int a = 5;
   // This is a comment
   return 0;
}